<!doctype html>
<html lang="si">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RU Online Stores ‚Äî Single File Demo</title>
  <style>
    /* -------- Variables / Themes -------- */
    :root{
      --bg:#ffffff; --fg:#0b1220; --muted:#6b7280; --card:#f9fafb; --accent:#ef4444; --nav-bg:rgba(255,255,255,0.9);
      --maxw:1100px;
    }
    [data-theme="dark"]{
      --bg:#071026; --fg:#e6eef8; --muted:#9aa6b2; --card:#0b1220; --accent:#fb7185; --nav-bg:rgba(6,10,18,0.85);
    }

    /* -------- Basic Reset -------- */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--fg); transition:background .22s,color .22s}
    a{color:inherit;text-decoration:none}
    .container{max-width:var(--maxw);margin:20px auto;padding:0 16px}

    /* -------- Header / Controls -------- */
    .header{position:sticky;top:0;z-index:80;padding:10px 16px;display:flex;align-items:center;justify-content:space-between;background:var(--nav-bg);backdrop-filter:blur(6px) saturate(110%)}
    .brand{font-weight:700;font-size:1.1rem}
    .controls{display:flex;gap:8px;align-items:center}
    .search-input{padding:8px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.08);min-width:180px}
    .select, .theme-btn, .linkish {padding:8px 10px;border-radius:10px;border:1px solid rgba(0,0,0,0.08);background:transparent;cursor:pointer}
    .theme-btn{display:inline-flex;align-items:center;gap:8px}

    /* -------- Products Grid -------- */
    .top-controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin:18px 0}
    .products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .product-card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06);display:flex;flex-direction:column;gap:10px}
    .product-card img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .product-title{font-weight:600}
    .product-price{font-weight:700;color:var(--accent)}
    .product-actions{display:flex;gap:8px;margin-top:auto}
    .btn{cursor:pointer;border:0;padding:8px 10px;border-radius:10px;background:var(--accent);color:white;font-weight:600}
    .linkish{background:transparent;border:0;color:var(--fg);cursor:pointer}

    /* -------- Modal Login -------- */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:120}
    .modal{background:var(--card);padding:18px;border-radius:12px;min-width:320px;max-width:420px;box-shadow:0 14px 60px rgba(2,6,23,0.45)}
    .form-row{margin-bottom:12px;display:flex;flex-direction:column;gap:6px}
    input[type="email"], input[type="password"]{padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08)}
    .small{font-size:0.9rem;color:var(--muted)}

    /* -------- Utilities -------- */
    .flex{display:flex}
    .space-between{justify-content:space-between}
    @media (max-width:520px){
      .product-card img{height:140px}
      .search-input{min-width:120px}
      .header{padding:8px}
    }
  </style>
</head>
<body>
  <header class="header" role="banner">
    <div class="brand">RU Online Stores</div>
    <div class="controls" role="navigation" aria-label="top controls">
      <input id="searchInput" class="search-input" placeholder="Search products..." aria-label="Search products">
      <select id="sortSelect" class="select" aria-label="Sort">
        <option value="default">Default</option>
        <option value="price-asc">Price: Low ‚Üí High</option>
        <option value="price-desc">Price: High ‚Üí Low</option>
      </select>
      <button id="themeToggle" class="theme-btn" title="Toggle theme">üåô Theme</button>
      <button id="loginOpen" class="linkish">Login</button>
    </div>
  </header>

  <main class="container" role="main">
    <section class="top-controls">
      <div>
        <strong id="welcomeLabel">Welcome,Guest</strong>
        <div class="small" id="userEmail" style="margin-top:4px"></div>
      </div>
      <div style="margin-left:auto" class="small">Demo single-file UI ‚Ä¢ No backend</div>
    </section>

    <section id="productsSection" class="products-grid" aria-live="polite">
      <!-- JS will render product cards here -->
    </section>
  </main>

  <!-- Login modal -->
  <div id="loginModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
      <h3 id="loginTitle">Login</h3>
      <div class="form-row">
        <label for="email">Email</label>
        <input id="email" type="email" placeholder="you@example.com" />
      </div>
      <div class="form-row">
        <label for="password">Password</label>
        <input id="password" type="password" placeholder="password" />
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
        <button id="loginBtn" class="btn">Sign in</button>
        <button id="closeModal" class="linkish">Cancel</button>
      </div>
      <p class="small" style="margin-top:8px">Demo login only ‚Äî no server. For real login we can add Firebase or similar later.</p>
    </div>
  </div>

  <script>
    /***** Single-file JS: Theme, Login, Products, Search/Sort *****/

    /* ---------- Theme (dark/light) ---------- */
    const themeToggle = document.getElementById('themeToggle');
    const applyTheme = (t) => {
      if (t === 'dark') document.documentElement.setAttribute('data-theme','dark');
      else document.documentElement.removeAttribute('data-theme');
      themeToggle.textContent = t === 'dark' ? '‚òÄÔ∏è Light' : 'üåô Dark';
    };
    const stored = localStorage.getItem('ru_theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    applyTheme(stored);
    themeToggle.addEventListener('click', ()=> {
      const now = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      applyTheme(now);
      localStorage.setItem('ru_theme', now);
    });

    /* ---------- Login modal demo ---------- */
    const loginOpen = document.getElementById('loginOpen');
    const loginModal = document.getElementById('loginModal');
    const closeModal = document.getElementById('closeModal');
    const loginBtn = document.getElementById('loginBtn');
    const welcomeLabel = document.getElementById('welcomeLabel');
    const userEmailEl = document.getElementById('userEmail');

    function showModal(){ loginModal.style.display='flex'; loginModal.setAttribute('aria-hidden','false'); }
    function hideModal(){ loginModal.style.display='none'; loginModal.setAttribute('aria-hidden','true'); }

    loginOpen.addEventListener('click', showModal);
    closeModal.addEventListener('click', hideModal);
    loginModal.addEventListener('click', (e)=> { if (e.target === loginModal) hideModal(); });

    loginBtn.addEventListener('click', ()=> {
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();
      if (!email || !password){ alert('‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª Email ‡∑É‡∑Ñ Password ‡∂Ø‡∑ô‡∂ö‡∂∏ ‡∂á‡∂≠‡∑î‡∂Ω‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.'); return; }
      // Demo: save user in localStorage
      localStorage.setItem('ru_user', JSON.stringify({email}));
      updateUserUI();
      hideModal();
      alert('Successfully signed in (demo): ' + email);
    });

    function signOut(){ localStorage.removeItem('ru_user'); updateUserUI(); alert('Signed out'); }

    function updateUserUI(){
      const raw = localStorage.getItem('ru_user');
      if (!raw){ welcomeLabel.textContent = 'Welcome, Guest'; userEmailEl.textContent=''; loginOpen.textContent='Login'; loginOpen.onclick = showModal; return; }
      const user = JSON.parse(raw);
      welcomeLabel.textContent = 'Welcome,' + (user.email.split('@')[0] || user.email);
      userEmailEl.textContent = user.email;
      loginOpen.textContent = 'Account';
      loginOpen.onclick = ()=> {
        if (confirm('Sign out from demo account?')) signOut();
      };
    }
    updateUserUI();

    /* ---------- Products data (demo) ---------- */
    // If you already have product HTML in your file, you can replace rendering with extraction.
    let products = [
      {id:1, title:'Carrot 22 (‡∂ö‡∑ê‡∂ª‡∂ß‡∑ä 22)', price:120, img:'https://picsum.photos/seed/carrot/600/400'},
      {id:2, title:'Apple Pack (‡∂á‡∂¥‡∂Ω‡∑ä ‡∂¥‡∑ê‡∂ö‡∑ö‡∂¢‡∂∫)', price:380, img:'https://picsum.photos/seed/apple/600/400'},
      {id:3, title:'Honey Jar (‡∂ú‡∑ö‡∂±‡∑ì)', price:750, img:'https://picsum.photos/seed/honey/600/400'},
      {id:4, title:'Organic Rice 5kg', price:2400, img:'https://picsum.photos/seed/rice/600/400'},
      {id:5, title:'Green Tea Box', price:980, img:'https://picsum.photos/seed/tea/600/400'},
      {id:6, title:'Coconut Oil 1L', price:1450, img:'https://picsum.photos/seed/coconut/600/400'}
    ];

    const productsSection = document.getElementById('productsSection');

    function renderProducts(list){
      productsSection.innerHTML = '';
      if (!list.length){ productsSection.innerHTML = '<div class="small">No products found.</div>'; return; }
      for (const p of list){
        const art = document.createElement('article');
        art.className = 'product-card';
        art.innerHTML = `
          <img src="${p.img}" alt="${p.title}">
          <div class="product-title">${p.title}</div>
          <div class="product-price">Rs. ${Number(p.price).toFixed(2)}</div>
          <div class="product-actions">
            <button class="btn add-cart" data-id="${p.id}">Add to Cart</button>
            <button class="linkish buy-now" data-id="${p.id}">Buy Now</button>
          </div>
        `;
        productsSection.appendChild(art);
      }
    }
    renderProducts(products);

    /* ---------- Search & Sort ---------- */
    const searchInput = document.getElementById('searchInput');
    const sortSelect = document.getElementById('sortSelect');

    function applyFilters(){
      const q = (searchInput.value || '').toLowerCase().trim();
      let filtered = products.filter(p => p.title.toLowerCase().includes(q));
      const s = sortSelect.value;
      if (s === 'price-asc') filtered.sort((a,b)=>a.price-b.price);
      if (s === 'price-desc') filtered.sort((a,b)=>b.price-a.price);
      renderProducts(filtered);
    }
    searchInput.addEventListener('input', applyFilters);
    sortSelect.addEventListener('change', applyFilters);

    /* ---------- Simple Add to Cart Demo ---------- */
    document.body.addEventListener('click', (e)=> {
      if (e.target.matches('.add-cart')){
        const id = e.target.dataset.id;
        const p = products.find(x=>x.id==id);
        if (!p) return;
        // demo cart in localStorage
        const cart = JSON.parse(localStorage.getItem('ru_cart') || '[]');
        cart.push({id:p.id, title:p.title, price:p.price, qty:1});
        localStorage.setItem('ru_cart', JSON.stringify(cart));
        alert(p.title + ' added to cart (demo). Cart size: ' + cart.length);
      }
      if (e.target.matches('.buy-now')){
        const id = e.target.dataset.id;
        const p = products.find(x=>x.id==id);
        if (!p) return;
        alert('Buy now clicked for: ' + p.title + '\\n(This is a demo. Integrate payment gateway to proceed.)');
      }
    });

    /* ---------- Accessibility: Close modal with ESC ---------- */
    document.addEventListener('keydown', (ev)=> {
      if (ev.key === 'Escape') hideModal();
    });

    /* ---------- End of single-file script ---------- */
  </script>
</body>
</html>
